<html>
<head>
<title>iP6 Plus の現在 判明している不具合について</title>
<META HTTP-EQUIV="content-type" CONTENT="text/html;charset="UTF-8">
<link rel="stylesheet" type="text/css" href="./style.css" title="normal style">
</head>
<body>

<h1>iP6 Plus の現在 判明している不具合について</h1>

Last update 2018/8/14


<h3>共通の不具合や、問題について</h3>
<ul>
 <li>Unix/X11 で音楽が鳴らないかもしれません。

 <li><a href="http://sbeach.seesaa.net/article/387861468.html">入出力命令のバグ</a>に対応してません。

　<p><span class="comment">なるべく早く対応したいと思っています。</span></p>

 <li>西田さんのVGAアダプターのスプライト機能　対応していません。
 <li>戦士のカートリッジmkII /mkIII に対応していません。（初代には対応しています）
 <li>音声合成は、mkII と6601 では一応対応しています。SRはおかしなしゃべり方になります。

 <li>ディスクが挿入されていないときに、ディスクにアクセスに行くと、??AT Errorが返されます。（実機では挿入されるまで待ちになります。）
 <li>上記に関係して、PC-6601SRの ビデオテロッパーを選択する前に、何でも良いのでディスクを挿入しておかないと、おかしくなってしまいます。

 <li>PC-6601SRで、TV予約をいくらしても、一切覚えてくれません。

  

 <li>フロッピィディスクの論理 formatは サポートしてませんので、現状では、フォーマット済みのイメージを用意してください。（＿）

	<p><span class="comment">
    一応、プログラム上は、フォーマット済みの新しいディスクイメージを作れるところまで
    きています。
    あとは、UIさえ実現出来れば、いつでも有効に出来るのですが・・。(汗)
    </span></p>


 
 <li>サポートしていない、I/O port がまだ残っています。
 <li>Debug 画面を、根本的に改良すべきです。
 
	 <p><span class="comment">
	 Debug は、コンソールが必要です。gdbの様にコマンドをいちいち打ち込む必要があり、
     お世辞にも使いやすいといえる代物では有りませんでした。(汗）
	 今後はGUIにしていきたいと思っています。
    </span></p>


 <li><del>TIME$ DATE$ に、日時を設定しても、変更できない</del>一応対応しました。
 <li><del>SRのモード6 のグラフィックスモードでVRAMを8000hからに設定できなかったバグ</del> 対応しました。


    
 
 <li>SRの SCREEN 3のPALETがおかしいです。

 <li>機種ごとに、使用する拡張ROMを選べるようにするべきです。


 <li>起動時に必要となる、ROMファイルの位置を指定できるようにすべきです。
 もしくは、ROMファイルを検索する？
 

 <li>iP6 Plus のコマンド名を、iP6plus にしたほうがいいかもしれません。

   <p><span class="comment">
    Unix 版では、IP6v 系のコマンド名と、かぶってしまうようだし、元祖iP6 との区別がつきにくくなっているので。</p>

 <li>ROM の位置を指定するか、検索できるようにしたいです。

   <p><span class="comment">
   現状では、iP6 Plus を展開した後は、必ずサブディレクトリなどに、ROMファイルを入れないといけないので、わずらわしいためです。
   あと、ほかのエミュレータと並存するときに、ROMファイルを共有しにくいという面があるかと思います。
   </p>

</ul>


<h3>Windows版</h3>
<ul>
<li>拡張漢字ROMの自動作成機能は、JIS第一水準の文字のみ、生成します。

	<p><span class="comment">
	拡張漢字ROMには、JIS第一水準の文字以外に、特殊な半角の文字も格納されています。
 	もし、生成できるようにするなら、対応するフォントを探すなどする必要があるでしょう。
    </span></p>

<li>音楽の速度が少し速かったり、遅かったりするようです。ウエイトを工夫しているのですが、なかなか治りません。

<li><del>key click off時、キークリック音を鳴らそうとして、一瞬ノイズが出たり、キークリック音が出たりしてしまうようです。これは、なんとか全部キークリック音にしたいのですが・・。(汗)
</del><strong>PC6001Vを参考に、一応対応しましたが。。。</strong>
<!--
	<p><span class="comment">
	現在のバージョンでは、サウンドレジスタに出力をしても、すぐに出力されない
    のが理由の一つかもしれません。Z80 CPUから定期的に呼ばれているキーボード走査関数
	で、一気に出力が指令されます。
    </span>
    
	<p><span class="comment">
    ただし、これをリアルタイムで出力するようにすると、よほど仮想CPUを律儀に
    動かさない限りは、テンポがおかしくなると思われます。
    </span>

	<p><span class="comment">
    あと、波形データは、前のデータの再生が終わってから、生成しています。
    つまり、波形データが　生成されていない　隙間の時間があるので、それを埋めないと
    いけないと思っています。
    </span>


<li><del>Windows 版のエミュレータの画面が、32ビットフルカラーである。256色モードにすべき。</del>
<strong>（対応しました。）</strong>

-->

</ul>



<h3>Unix版</h3>
<ul>
 <li>ダイアログを作り直すべきです。付属している設定ダイアログは、元祖 iP6 のままなので、設定できる項目が少ないです。
 <li>メニューを作るべきです。メニューがないので、ほとんど、起動オプションで指定する必要があり、ダイアログでいじれる以外については、実行中に設定を変えられません。

	<p><span class="comment">
	どちらも、アテナウィジットでやろうとしましたが、大変そうなので、挫折中です。(汗)
    </span></p>

 <li><del>ハードウエアスクロールと、204ラインは　未対応のため、何も起こりません・・。</del><strong>（一応対応しました）</strong>
 
	<!--<p><span class="comment">
	サーフェスを増やせばすぐに出来そうですが、描画処理部分のソースが煩雑としているので
    もっとすっきりできないかと考え中です。(共有メモリの扱いが・・。(汗)）
    </span></p>-->
 
 <li>音がへろへろです。もっとまともにしたいです。これも、試行錯誤の途中です。
 
	<p><span class="comment">
    FreeBSDで正しく発音されない原因がわかりつつあります。
    </span></p>
 
 <li>拡張漢字ROMの漢字の自動作成機能は　対応していません。
 
	<p><span class="comment">
	Unixのフォント指定方法が良くわかりません。
	というか、Unixの場合システムによって使えるフォントが違うので、単純に、"MSゴシック"
	というわけにはいかないのが難点です。(^^;;
	フリーのBDFファイルとかを用意するほうがいいのでしょうか？
    </span></p>
 
 
 <li>ダイアログを開いていある間は、エミュレータは完全に停止します。




</body>
</html>
